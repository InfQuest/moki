import{a as t,M as c}from"./chunk-DwgIagi8.js";const b=["en","zh-CN","zh-TW","ja","ko","es","fr","de"],p=["en","zh_CN","zh_TW","ja","ko","es","fr","de"];function C(e){return p.includes(e)}function N(e){return`languages_${e.replace("-","")}`}function _(e){const n=N(e),r=g(n);return r!==n?r:e}function O(e){return e.replace("_","-")}const f="en",T="interfaceLanguage";let a={},s=f,h=f;async function A(){const e=chrome.i18n.getUILanguage(),n=j(e);h=C(n)?n:f;const o=(await chrome.storage.sync.get([T]))[T];o&&C(o)?s=o:s=h,await Promise.all([d(h),d(s)])}async function d(e){if(!a[e])try{const n=chrome.runtime.getURL(`_locales/${e}/messages.json`),o=await(await fetch(n)).json();a[e]=o}catch(n){console.error(`[i18n] Failed to load messages for locale: ${e}`,n),e!==f&&await d(f)}}function j(e){return e.replace("-","_")}function g(e,n){const r=a[s]||a[f];if(!r)return console.warn(`[i18n] No messages loaded for locale: ${s}, cache keys:`,Object.keys(a)),e;if(!r[e])return console.warn(`[i18n] Missing translation key: ${e} for locale: ${s}`,`Available keys: ${Object.keys(r).length}`),e;let o=r[e].message;return n&&(Array.isArray(n)?n:[n]).forEach((u,z)=>{o=o.replace(`$${z+1}`,u)}),o}function I(e,n){const r=a[h]||a[f];return r?r[e]?r[e].message:(console.warn(`[i18n] Missing translation key: ${e} for browser locale: ${h}`,`Available keys: ${Object.keys(r).length}`),e):(console.warn(`[i18n] No messages loaded for browser locale: ${h}, cache keys:`,Object.keys(a)),e)}function S(){return s}async function y(e){if(!C(e)){console.error(`[i18n] Unsupported locale: ${e}`);return}s=e,await chrome.storage.sync.set({[T]:e}),await d(e)}const k=1e4;function i(e,n,r={},o=k){return new Promise((l,u)=>{const z=setTimeout(()=>{u(new Error(`Message ${n} timed out after ${o}ms`))},o);chrome.runtime.sendMessage({source:e,type:n,data:r,timestamp:Date.now()},m=>{clearTimeout(z),chrome.runtime.lastError?u(new Error(chrome.runtime.lastError.message||"Unknown error")):l(m)})})}function P(e,n,r={}){chrome.runtime.sendMessage({source:e,type:n,data:r,timestamp:Date.now()})}async function v(e,...n){const r=t.CONTENT_SCRIPT,o=await i(r,c.API_CALL,{method:e,args:n});if(!(o!=null&&o.success))throw new Error((o==null?void 0:o.error)||`API call '${e}' failed`);return o.data}const $={async loadCollections(e,n){return(await i(t.CONTENT_SCRIPT,c.COLLECTION_LOAD,{videoViewId:e,sourceLang:n})).collections},async removeCollection(e,n,r=t.CONTENT_SCRIPT){await i(r,c.COLLECTION_REMOVE,{videoViewId:n??0,collectionId:e})},async isWordCollected(e,n,r){return(await i(t.CONTENT_SCRIPT,c.COLLECTION_CHECK,{videoViewId:e,word:n,segmentBegin:r})).collected},async getCollectionId(e,n,r){return(await i(t.CONTENT_SCRIPT,c.COLLECTION_CHECK,{videoViewId:e,word:n,segmentBegin:r,returnId:!0})).collectionId},async getCollectedLemmas(e){const n=await i(t.CONTENT_SCRIPT,c.COLLECTION_GET_LEMMAS,{videoViewId:e});return new Set(n.lemmas)},async createCollection(e){const n=await i(t.CONTENT_SCRIPT,c.COLLECTION_CREATE,{request:e});if(!n.success||!n.collection)throw new Error(n.error||"Failed to create collection");return n.collection}},L=["zh-CN","zh-TW","ja","ko"],W=["zh-CN","zh-TW"];function M(e){return L.includes(e)}function R(e){return W.includes(e)}const E={noun:{en:"noun","zh-CN":"名词","zh-TW":"名詞",ja:"名詞",ko:"명사",es:"sust.",fr:"nom",de:"Subst."},verb:{en:"verb","zh-CN":"动词","zh-TW":"動詞",ja:"動詞",ko:"동사",es:"verb.",fr:"verbe",de:"Verb"},adj:{en:"adj.","zh-CN":"形容词","zh-TW":"形容詞",ja:"形容詞",ko:"형용사",es:"adj.",fr:"adj.",de:"Adj."},adv:{en:"adv.","zh-CN":"副词","zh-TW":"副詞",ja:"副詞",ko:"부사",es:"adv.",fr:"adv.",de:"Adv."},pron:{en:"pron.","zh-CN":"代词","zh-TW":"代詞",ja:"代名詞",ko:"대명사",es:"pron.",fr:"pron.",de:"Pron."},prep:{en:"prep.","zh-CN":"介词","zh-TW":"介詞",ja:"前置詞",ko:"전치사",es:"prep.",fr:"prép.",de:"Präp."},conj:{en:"conj.","zh-CN":"连词","zh-TW":"連詞",ja:"接続詞",ko:"접속사",es:"conj.",fr:"conj.",de:"Konj."},det:{en:"det.","zh-CN":"限定词","zh-TW":"限定詞",ja:"限定詞",ko:"한정사",es:"det.",fr:"dét.",de:"Det."},intj:{en:"intj.","zh-CN":"感叹词","zh-TW":"感嘆詞",ja:"感動詞",ko:"감탄사",es:"interj.",fr:"interj.",de:"Interj."},num:{en:"num.","zh-CN":"数词","zh-TW":"數詞",ja:"数詞",ko:"수사",es:"num.",fr:"num.",de:"Num."},particle:{en:"part.","zh-CN":"助词","zh-TW":"助詞",ja:"助詞",ko:"조사",es:"part.",fr:"part.",de:"Part."},article:{en:"art.","zh-CN":"冠词","zh-TW":"冠詞",ja:"冠詞",ko:"관사",es:"art.",fr:"art.",de:"Art."},name:{en:"name","zh-CN":"专名","zh-TW":"專名",ja:"固有名詞",ko:"고유명사",es:"n.p.",fr:"n.p.",de:"Eigenn."},phrase:{en:"phr.","zh-CN":"短语","zh-TW":"短語",ja:"句",ko:"구",es:"loc.",fr:"loc.",de:"Phras."},prep_phrase:{en:"prep.phr.","zh-CN":"介词短语","zh-TW":"介詞短語",ja:"前置詞句",ko:"전치사구",es:"loc.prep.",fr:"loc.prép.",de:"Präp.phr."},adv_phrase:{en:"adv.phr.","zh-CN":"副词短语","zh-TW":"副詞短語",ja:"副詞句",ko:"부사구",es:"loc.adv.",fr:"loc.adv.",de:"Adv.phr."},proverb:{en:"prov.","zh-CN":"谚语","zh-TW":"諺語",ja:"諺",ko:"속담",es:"refr.",fr:"prov.",de:"Sprichw."},abbrev:{en:"abbr.","zh-CN":"缩写","zh-TW":"縮寫",ja:"略語",ko:"약어",es:"abrev.",fr:"abrév.",de:"Abk."},contraction:{en:"contr.","zh-CN":"缩约","zh-TW":"縮約",ja:"短縮形",ko:"축약형",es:"contr.",fr:"contr.",de:"Kontr."},symbol:{en:"sym.","zh-CN":"符号","zh-TW":"符號",ja:"記号",ko:"기호",es:"símb.",fr:"symb.",de:"Symb."},punct:{en:"punct.","zh-CN":"标点","zh-TW":"標點",ja:"句読点",ko:"문장부호",es:"punt.",fr:"ponct.",de:"Satzz."},adj_noun:{en:"adj.n.","zh-CN":"形容动词","zh-TW":"形容動詞",ja:"形容動詞",ko:"형용동사"},prefix:{en:"pref.","zh-CN":"前缀","zh-TW":"前綴",ja:"接頭辞",ko:"접두사",es:"pref.",fr:"préf.",de:"Präf."},suffix:{en:"suff.","zh-CN":"后缀","zh-TW":"後綴",ja:"接尾辞",ko:"접미사",es:"suf.",fr:"suff.",de:"Suff."},affix:{en:"aff.","zh-CN":"词缀","zh-TW":"詞綴",ja:"接辞",ko:"접사",es:"afijo",fr:"aff.",de:"Aff."},infix:{en:"inf.","zh-CN":"中缀","zh-TW":"中綴",ja:"接中辞",ko:"접요사",es:"infijo",fr:"inf.",de:"Inf."},interfix:{en:"interf.","zh-CN":"连接缀","zh-TW":"連接綴",ja:"連結辞",ko:"연결사",es:"interf.",fr:"interf.",de:"Interf."},circumfix:{en:"circf.","zh-CN":"环缀","zh-TW":"環綴",ja:"接周辞",ko:"접환사",es:"circunf.",fr:"circonf.",de:"Zirkumf."},combining_form:{en:"comb.","zh-CN":"构词成分","zh-TW":"構詞成分",ja:"連結形",ko:"결합형",es:"elem.",fr:"élém.",de:"Komp."},root:{en:"root","zh-CN":"词根","zh-TW":"詞根",ja:"語根",ko:"어근",es:"raíz",fr:"rac.",de:"Wurzel"},circumpos:{en:"circpos.","zh-CN":"环置词","zh-TW":"環置詞",ja:"囲置詞",ko:"환치사",de:"Zirkump."},classifier:{en:"clf.","zh-CN":"量词","zh-TW":"量詞",ja:"助数詞",ko:"분류사"},counter:{en:"ctr.","zh-CN":"量词","zh-TW":"量詞",ja:"助数詞",ko:"수분류사"},adnominal:{en:"adn.","zh-CN":"连体词","zh-TW":"連體詞",ja:"連体詞",ko:"관형사"},postp:{en:"postp.","zh-CN":"后置词","zh-TW":"後置詞",ja:"後置詞",ko:"후치사",de:"Postp."},syllable:{en:"syl.","zh-CN":"音节","zh-TW":"音節",ja:"音節",ko:"음절"},unknown:{en:"—","zh-CN":"—","zh-TW":"—",ja:"—",ko:"—",es:"—",fr:"—",de:"—"},character:{en:"char.","zh-CN":"字","zh-TW":"字",ja:"文字",ko:"문자",es:"car.",fr:"car.",de:"Zeich."},romanization:{en:"rom.","zh-CN":"罗马音","zh-TW":"羅馬音",ja:"ローマ字",ko:"로마자"}};function U(e,n){if(!e)return"";const r=E[e];if(!r)return e;const o=r[n];if(o)return o;const l=r.en;return l||e}export{$ as C,b as S,i as a,g as b,v as c,R as d,_ as e,A as f,U as g,y as h,M as i,p as j,S as k,O as l,P as s,I as t};
